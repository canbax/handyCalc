<mat-sidenav-container>
  <mat-sidenav mode="side" #sidenav [(opened)]="isOpen" (disableClose)="true">
    <mat-accordion>
      <mat-expansion-panel [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{'Settings'|translate}}
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div>
          <div class="form-part">
            <label>Mod</label>
            <mat-radio-group aria-labelledby="example-radio-group-label" [(ngModel)]="settings.mode"
              (change)="onModeChange()">
              <mat-radio-button *ngFor="let m of modes" [value]="m">
                {{m|translate}}
              </mat-radio-button>
            </mat-radio-group>
          </div>
          <div class="form-part">
            <div>{{'Language'|translate}}</div>
            <mat-form-field>
              <mat-select [(value)]="settings.lang" (selectionChange)="switchLang()">
                <mat-option *ngFor="let language of translate.getLangs()" [value]="language">
                  {{langs[language]}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="form-part">
            <div>{{'Precision for floating-point numbers in result'|translate}}</div>
            <mat-form-field>
              <mat-select [(value)]="settings.selectedFloatingPointPrecision"
                (selectionChange)="floatingPrecisionChanged()">
                <mat-option *ngFor="let n of [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]" [value]="n">
                  {{n}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="form-part">
            <div>{{'Number of digits in result'|translate}}</div>
            <mat-form-field>
              <mat-select [(value)]="settings.numDigit4Results" (selectionChange)="numDigit4ResultChanged()">
                <mat-option *ngFor="let n of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]" [value]="n">
                  {{n}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="form-part">
            <mat-checkbox [disabled]="settings.floatingPointMarker == ','" [(checked)]="settings.isIgnoreComma"
              (change)="isIgnoreCommaChanged()">
              {{'Ignore commas'|translate}}
            </mat-checkbox>
          </div>
          <div class="form-part">
            <div>{{'Use for floating-point numbers'|translate}}</div>
            <mat-radio-group [(ngModel)]="settings.floatingPointMarker" class="degree-radio"
              (change)="floatMarkerChanged()">
              <mat-radio-button value=".">.</mat-radio-button>
              <mat-radio-button value=",">,</mat-radio-button>
            </mat-radio-group>
          </div>
          <div class="form-part">
            <div>{{'Style'|translate}}</div>
            <mat-radio-group [(ngModel)]="settings.path2CssTheme" (change)="onCssThemeChange()">
              <mat-radio-button *ngFor="let t of cssThemes" [value]="t.path">
                {{t.txt}}
              </mat-radio-button>
            </mat-radio-group>
          </div>
        </div>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{'Info'|translate}}
          </mat-panel-title>
        </mat-expansion-panel-header>
        <form [formGroup]="fnListForm" class="container">
          <mat-form-field>
            <input type="text" matInput [placeholder]="'Functions'|translate" formControlName="fnGroup"
              [matAutocomplete]="autoGroup">
            <mat-autocomplete #autoGroup="matAutocomplete" (optionSelected)="fnSelected($event)">
              <mat-optgroup *ngFor="let group of fnGroupOptions | async" [label]="group.title">
                <mat-option *ngFor="let name of group.fnList" [value]="name">
                  {{name}}
                </mat-option>
              </mat-optgroup>
            </mat-autocomplete>
          </mat-form-field>
          <div>
            <span class="">
              {{fnExpo}}
            </span>
            <a *ngIf="link2fn.length > 0" target="_blank" [href]="link2fn">
              <mat-icon>info</mat-icon>
            </a>
          </div>
        </form>
      </mat-expansion-panel>
    </mat-accordion>

  </mat-sidenav>
  <mat-sidenav-content class="m-5">
    <div class="header">
      <button mat-icon-button (click)="sidenav.toggle()">
        <mat-icon>menu</mat-icon>
      </button>
      <span class="header-txt">
        <a href="https://github.com/canbax/handyCalc" target="_blank"> Handy Calculator (0.0 beta)</a>
      </span>
    </div>

    <div class="m-5">

      <div [hidden]="settings.mode != 'date & time'">
        <mat-form-field class="editor">
          <mat-chip-list #chipList>
            <mat-chip *ngFor="let d of dateChips; let i = index" [removable]="true" (removed)="remove(i)">
              {{d.str}}
              <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
            </mat-chip>
            <input #userDateInp [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="[13]"
              [matChipInputAddOnBlur]="false" (matChipInputTokenEnd)="add($event)" [ngModel]='inp'
              (ngModelChange)='changed($event)'>
          </mat-chip-list>
        </mat-form-field>
        <input type="text" id="date-inp">
        <button (click)="addDate()">add date</button>


      </div>
      <div>
        <mat-form-field *ngIf="settings.mode != 'date & time'" [style.fontSize]="16" class="editor"
          appearance="outline">
          <textarea #userInp (keydown)="onKeyDown($event)" (keyup)="onKeyUp($event)" autofocus matInput
            cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1" [ngModel]='inp'
            (ngModelChange)='changed($event)' cdkAutosizeMaxRows="10">
            </textarea>
        </mat-form-field>
        <button mat-icon-button matSuffix (click)="copy(inp)">
          <mat-icon>file_copy</mat-icon>
        </button>
        <button mat-icon-button matSuffix (click)="isShowHistory=!isShowHistory;">
          <mat-icon>history</mat-icon>
        </button>
        <div>
          <div *ngIf="settings.mode == 'programmer'">
            <mat-radio-group [(ngModel)]="base" (change)="compute()">
              <mat-radio-button *ngFor="let b of bases; let i = index" [value]="b">
                <span class="result-base"> {{b}} &nbsp;&nbsp;</span>
                <span class="result-txt">{{results[i]}}</span>
                <button *ngIf="results[i].length > 0" mat-icon-button matSuffix (click)="copy(results[i])">
                  <mat-icon>file_copy</mat-icon>
                </button>
              </mat-radio-button>
            </mat-radio-group>
          </div>
          <div *ngIf="settings.mode != 'programmer'">
            <span class="result-txt">{{results[1]}}</span>
            <button *ngIf="results[1].length > 0" mat-icon-button matSuffix (click)="copy(results[1])">
              <mat-icon>file_copy</mat-icon>
            </button>
          </div>
          <mat-radio-group *ngIf="isTrigonometric" class="degree-radio" [(ngModel)]="degreeUnit" (change)="compute()">
            <mat-radio-button *ngFor="let u of degreeUnits" [value]="u">
              {{u}}
            </mat-radio-button>
          </mat-radio-group>
        </div>
      </div>
    </div>
    <mat-card class="m-5" *ngIf="isShowHistory">
      <mat-action-list>
        <div mat-list-item *ngFor="let o of computeHistory; let i = index">
          <button mat-raised-button class="wide-btn" (click)="loadFromHistory(o)"> {{o}}
          </button>
          <button mat-icon-button (click)="deleteFromHistory(i)">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </mat-action-list>
    </mat-card>
    <app-screen-keyboard class="m-5" [currInp]="inp" (screenKeyClicked)="onScreenKeyClicked($event)">
    </app-screen-keyboard>

  </mat-sidenav-content>
</mat-sidenav-container>